SET SERVEROUTPUT ON;

DECLARE
    v_result VARCHAR2(255);
BEGIN
    DBMS_OUTPUT.PUT_LINE('=== Test 1: Valid Insertion ===');
    v_result := registerWorkstation(
        p_workstation_name        => 'Assembly Line A',
        p_workstation_description => 'Handles primary assembly tasks',
        p_workstation_type_id     => 1,
        p_workstation_legacy_id   => 'LEG001'
    );
    DBMS_OUTPUT.PUT_LINE(v_result);

    DBMS_OUTPUT.PUT_LINE('=== Test 2: Invalid Workstation Type ID ===');
    BEGIN
        v_result := registerWorkstation(
            p_workstation_name        => 'Invalid Workstation',
            p_workstation_description => 'This should fail',
            p_workstation_type_id     => 9999
        );
        DBMS_OUTPUT.PUT_LINE(v_result);
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
    END;

    DBMS_OUTPUT.PUT_LINE('=== Test 3l: NULL Mandatory Fields ===');
    BEGIN
        v_result := registerWorkstation(
            p_workstation_name        => NULL,
            p_workstation_description => 'No Name Provided',
            p_workstation_type_id     => 1
        );
        DBMS_OUTPUT.PUT_LINE(v_result);
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
    END;
END;
/


BEGIN
    DBMS_OUTPUT.PUT_LINE('=== Cleanup ===');
    DELETE FROM Workstation WHERE workstation_name IN (
        'Assembly Line A',
        'Invalid Workstation'
    );
    COMMIT;
    DBMS_OUTPUT.PUT_LINE('Cleanup completed.');
END;
/