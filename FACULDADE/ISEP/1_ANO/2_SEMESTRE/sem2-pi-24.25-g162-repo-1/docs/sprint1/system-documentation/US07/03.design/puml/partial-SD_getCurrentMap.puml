@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

participant ":ViewStationDetailsController" as CTRL

participant "repositories\n:Repositories" as REPOS

participant "ApplicationSession" as APP_SESSION
participant "appSession\n:ApplicationSession" as APP_SESSION_SINGLETON
participant "currentSession\n:UserSession" as CURRENT_SESSION

participant "mapRepository\n:MapRepository" as MAP_REPO

autonumber 28
-> CTRL
autonumber 28.1

activate CTRL

      CTRL -> APP_SESSION : getCurrentSession()

      activate APP_SESSION

        APP_SESSION --> CTRL : currentSession
      
      deactivate APP_SESSION

      CTRL -> APP_SESSION_SINGLETON : getCurrentSession()

      activate APP_SESSION_SINGLETON

        APP_SESSION_SINGLETON --> CTRL : currentSession

      deactivate APP_SESSION_SINGLETON

      CTRL -> CURRENT_SESSION : getCurrentMapName()

      activate CURRENT_SESSION

        CURRENT_SESSION --> CTRL : currentMapName
      
      deactivate CURRENT_SESSION

      CTRL -> REPOS : getMapRepository()

      activate REPOS

        REPOS --> CTRL : mapRepository

      deactivate REPOS

      CTRL -> MAP_REPO : getMapByName(mapName)

      activate MAP_REPO

        MAP_REPO --> CTRL : map

      deactivate MAP_REPO
<- CTRL : map
deactivate CTRL
@enduml